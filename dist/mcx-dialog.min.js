/**
 * Mcx Dialog v0.1.2
 * Copyright (C) 2018 mcx
 * https://github.com/code-mcx/mcx-dialog
 */
(function(b,a){typeof exports==="object"&&typeof module!=="undefined"?module.exports=a():typeof define==="function"&&define.amd?define(a):(b.mcxDialog=a())}(this,(function(){var k=!!document.addEventListener;function h(v,u,w){if(k){v.addEventListener(u,w)}else{v.attachEvent("on"+u,w)}}function s(w,v,u){if(k){w.removeEventListener(v,u)}else{w.detachEvent("on"+v,u)}}function a(v){var u=v.offsetTop;while(v.offsetParent!==null){u+=v.offsetParent.offsetTop;v=v.offsetParent}return u}function o(v){var u=v.offsetLeft;while(v.offsetParent!==null){u+=v.offsetParent.offsetLeft;v=v.offsetParent}return u}function i(v,w){var u=v.className.split(" ");if(v.className===""){u=[]}u.push(w);v.className=u.join(" ")}function r(v,w){for(var u in w){v[u]=w[u]}return v}var t={init:function p(z,K,F){var E=document.getElementsByTagName("body")[0];var H=document.createElement("div");if(F){i(H,"mcx-dialog-bg");E.appendChild(H);if(K.shadeClose){h(H,"click",function(){C()})}}if(K.showClose){var I=z.getElementsByTagName("i")[0];h(I,"click",function(){C()})}var D=false;if(z.style.animation!==undefined){D=true}function B(){t.close([z]);s(z,"animationend",B)}function C(){if(D){i(z,"animation-"+K.animationType+"-out");h(z,"animationend",B);t.close([H]);if(K.layer){q.layerElement=[]}}else{t.close([H,z]);if(K.layer){q.layerElement=[]}}}var J=z.getElementsByTagName("div")[0];var v=void 0,u=void 0,y=void 0,G=void 0;function x(M){var L=(M.pageX||M.clientX)-v;var N=(M.pageY||M.clientY)-u;z.style.left=y+L+"px";z.style.top=G+N+"px"}h(J,"mousedown",function(L){v=L.pageX||L.clientX;u=L.pageY||L.clientY;y=parseFloat(z.style.left);G=parseFloat(z.style.top);h(document,"mousemove",x)});h(J,"mouseup",function(){s(document,"mousemove",x)});if(K.buttons.length>0){for(var A=0;A<K.buttons.length;A++){var w=K.buttons[A];w.setAttribute("index",A);h(w,"click",function(L){C();var M=L.target||L.srcElement;if(K.btnClick){K.btnClick(parseInt(M.getAttribute("index")))}})}}E.appendChild(z);z.style.top=(document.documentElement.clientHeight-z.offsetHeight)/2+"px";z.style.left=(document.documentElement.clientWidth-z.offsetWidth)/2+"px";if(K.layer){q.layerElement.push(H);q.layerElement.push(z);K.afterLoad()}},initHint:function l(w,C){var A=document.getElementsByTagName("body")[0];A.appendChild(w);if(C.target===undefined){w.style.top=(document.documentElement.clientHeight-w.offsetHeight)/2+"px";w.style.left=(document.documentElement.clientWidth-w.offsetWidth)/2+"px"}else{var B=document.getElementById(C.target);var u=a(B);var v=o(B);if(C.direction==="right"){v=v+B.offsetWidth;w.style.top=u+"px";w.style.left=v+10+"px"}else{if(C.direction==="left"){v=v-w.offsetWidth;w.style.top=u+"px";w.style.left=v-10+"px"}else{if(C.direction==="top"){u=u-w.offsetHeight;w.style.top=u-10+"px";w.style.left=v+"px"}else{if(C.direction==="bottom"){u=u+B.offsetHeight;w.style.top=u+10+"px";w.style.left=v+"px"}}}}}var z=false;if(w.style.animation!==undefined){z=true}function x(){t.close([w]);s(w,"animationend",x)}function y(){if(z){i(w,"animation-"+C.animationType+"-out");h(w,"animationend",x)}else{t.close([w])}}setTimeout(function(){y()},C.time*1000)},close:function n(w){var u=document.getElementsByTagName("body")[0];for(var v=0;v<w.length;v++){u.removeChild(w[v])}}};var q={loadElement:[],layerElement:[],alert:function c(w,u){var v={showClose:true,shadeClose:false,animationType:"bounce",titleStyle:{},buttonStyle:{}};v=r(v,u);v.btn=["确定"];v.btnClick=undefined;if(v.buttonStyle){v.buttonStyle=[v.buttonStyle]}this.open(w,v)},confirm:function g(w,u){var x={color:"#000000",border:"1px solid #DEDEDE",backgroundColor:"#F1F1F1"};var v={btn:["确定","取消"],showClose:true,shadeClose:false,animationType:"bounce",titleStyle:{},buttonStyle:[{},x]};v=r(v,u);if(v.buttonStyle.length===1){v.buttonStyle=[u.buttonStyle[0],x]}this.open(w,v)},layer:function t(u){var v={width:500,height:400,showClose:true,shadeClose:false,animationType:"bounce",titleStyle:{},style:1,content:"",afterLoad:function w(){}};v=r(v,u);v.btn=[];v.showClose=true;v.layer=true;this.open(v.content,v)},open:function m(B,G){var C=document.createElement("div");var F=document.createElement("div");var E=document.createElement("div");var v=document.createElement("div");v.innerHTML=G.title||"信息";E.innerHTML=B;i(C,"mcx-dialog");i(C,"animation-"+G.animationType+"-in");i(F,"dialog-head");i(E,"dialog-content");i(v,"dialog-title");F.appendChild(v);C.appendChild(F);C.appendChild(E);if(G.width){C.style.width=G.width+"px"}if(G.height){if(!G.layer){E.style.height=G.height-41-2*18-50+"px"}else{E.style.height=G.height-41+"px";i(E,"dialog-layer-content")}}if(G.titleStyle){for(var z in G.titleStyle){F.style[z]=G.titleStyle[z]}}if(G.showClose){var x=document.createElement("i");i(x,"dialog-ico");F.appendChild(x)}var u=document.createElement("div");if(!G.layer){i(u,"dialog-foot");C.appendChild(u)}else{if(G.style===1){i(C,"dialog-layer");F.style.borderRadius="0"}E.style.overflow="auto"}G.buttons=[];for(var A=0;A<G.btn.length;A++){var w=document.createElement("a");w.href="javascript:void(0);";w.innerHTML=G.btn[A];i(w,"dialog-foot-btn");if(G.buttonStyle&&G.buttonStyle.length>0){var D=G.buttonStyle[A];for(var y in D){w.style[y]=D[y]}}u.appendChild(w);G.buttons.push(w)}t.init(C,G,true)},msg:function f(y,v){var x={time:3,style:{},animationType:"zoom"};x=r(x,v);var w=document.createElement("div");i(w,"mcx-dialog-msg");i(w,"animation-"+x.animationType+"-in");w.innerHTML=y;for(var u in x.style){w.style[u]=x.style[u]}t.initHint(w,x)},tips:function b(A,z,D){var u={time:3,direction:"right",animationType:"zoom",style:{}};u=r(u,D);u.target=z||"";var w={left:"right",right:"left",top:"bottom",bottom:"top"};var y=document.createElement("div");var v=document.createElement("div");var C=document.createElement("div");var B=document.createElement("div");i(y,"mcx-dialog-tips");i(y,"animation-"+u.animationType+"-in");i(v,"tips-wrapper");i(C,"tips-arrow-"+w[u.direction]);B.innerHTML=A;y.appendChild(v);v.appendChild(C);v.appendChild(B);for(var x in u.style){y.style[x]=u.style[x];if(x==="backgroundColor"){if(u.direction==="left"||u.direction==="right"){C.style.borderBottomColor=u.style[x]}else{C.style.borderRightColor=u.style[x]}}}t.initHint(y,u)},loading:function d(x){var z={src:"img",hint:"",type:1,animationType:"zoom"};z=r(z,x);var A=document.createElement("div");var v=document.createElement("div");var y=document.createElement("img");var w=document.createElement("div");i(A,"mcx-dialog-loading-bg");i(v,"mcx-dialog-loading");i(v,"animation-"+z.animationType+"-in");if(z.hint){i(v,"mcx-dialog-loading-hint");w.innerHTML=z.hint}y.src=z.src+"/loading-"+z.type+".gif";v.appendChild(y);v.appendChild(w);var u=document.getElementsByTagName("body")[0];u.appendChild(A);u.appendChild(v);v.style.top=(document.documentElement.clientHeight-v.offsetHeight)/2+"px";v.style.left=(document.documentElement.clientWidth-v.offsetWidth)/2+"px";this.loadElement.push(A);this.loadElement.push(v)},closeLoading:function e(){t.close(this.loadElement);this.loadElement=[]},closeLayer:function j(){t.close(this.layerElement);this.layerElement=[]}};q.install=function(v,u){v.prototype.$mcxDialog=q};return q})));