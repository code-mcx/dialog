(function(e){function d(l,m){var k=l.className.split(" ");if(l.className==""){k=[]}k.push(m);l.className=k.join(" ")}var b=!!document.addEventListener;function f(l,k,m){if(b){l.addEventListener(k,m)}else{l.attachEvent("on"+k,m)}}function a(m,l,k){if(b){m.removeEventListener(l,k)}else{m.detachEvent("on"+l,k)}}function h(l,m){for(var k in m){l[k]=m[k]}return l}function i(l){var k=l.offsetTop;while(l.offsetParent!=null){k+=l.offsetParent.offsetTop;l=l.offsetParent}return k}function j(l){var k=l.offsetLeft;while(l.offsetParent!=null){k+=l.offsetParent.offsetLeft;l=l.offsetParent}return k}var c={init:function(p,A,v){var u=document.getElementsByTagName("body")[0];if(v){var x=document.createElement("div");d(x,"mcx-dialog-bg");u.appendChild(x);if(A.shadeClose){f(x,"click",function(){s()})}}if(A.showClose){var y=p.getElementsByTagName("i")[0];f(y,"click",function(){s()})}var t=false;if(p.style.animation!=undefined){t=true}function r(){c.close([p]);a(p,"animationend",r)}function s(){if(t){d(p,"animation-"+A.animationType+"-out");f(p,"animationend",r);c.close([x]);if(A.layer){g.layerElement=[]}}else{c.close([x,p]);if(A.layer){g.layerElement=[]}}}var z=p.getElementsByTagName("div")[0];var l,k,o,w;function n(C){var B=(C.pageX||C.clientX)-l;var D=(C.pageY||C.clientY)-k;p.style.left=o+B+"px";p.style.top=w+D+"px"}f(z,"mousedown",function(B){l=B.pageX||B.clientX;k=B.pageY||B.clientY;o=parseFloat(p.style.left);w=parseFloat(p.style.top);f(document,"mousemove",n)});f(z,"mouseup",function(){a(document,"mousemove",n)});if(A.buttons.length>0){for(var q=0;q<A.buttons.length;q++){var m=A.buttons[q];m.setAttribute("index",q);f(m,"click",function(B){s();var C=B.target||B.srcElement;if(A.btnClick){A.btnClick(parseInt(C.getAttribute("index")))}})}}u.appendChild(p);p.style.top=(document.documentElement.clientHeight-p.offsetHeight)/2+"px";p.style.left=(document.documentElement.clientWidth-p.offsetWidth)/2+"px";if(A.layer){g.layerElement.push(x);g.layerElement.push(p);A.afterLoad()}},initHint:function(m,s){var q=document.getElementsByTagName("body")[0];q.appendChild(m);if(s.target==undefined){m.style.top=(document.documentElement.clientHeight-m.offsetHeight)/2+"px";m.style.left=(document.documentElement.clientWidth-m.offsetWidth)/2+"px"}else{var r=document.getElementById(s.target);var k=i(r);var l=j(r);if(s.direction=="right"){l=l+r.offsetWidth;m.style.top=k+"px";m.style.left=l+10+"px"}else{if(s.direction=="left"){l=l-m.offsetWidth;m.style.top=k+"px";m.style.left=l-10+"px"}else{if(s.direction=="top"){k=k-m.offsetHeight;m.style.top=k-10+"px";m.style.left=l+"px"}else{if(s.direction=="bottom"){k=k+r.offsetHeight;m.style.top=k+10+"px";m.style.left=l+"px"}}}}}var p=false;if(m.style.animation!=undefined){p=true}function n(){c.close([m]);a(m,"animationend",n)}function o(){if(p){d(m,"animation-"+s.animationType+"-out");f(m,"animationend",n)}else{c.close([m])}}setTimeout(function(){o()},s.time*1000)},close:function(m){var k=document.getElementsByTagName("body")[0];for(var l=0;l<m.length;l++){k.removeChild(m[l])}}};var g={loadElement:[],layerElement:[],alert:function(m,k){var l={showClose:true,shadeClose:false,animationType:"bounce",titleStyle:{},buttonStyle:{}};l=h(l,k);l.btn=["确定"];l.btnClick=undefined;if(l.buttonStyle){l.buttonStyle=[l.buttonStyle]}this.open(m,l)},confirm:function(m,k){var n={color:"#000000",border:"1px solid #DEDEDE",backgroundColor:"#F1F1F1"};var l={btn:["确定","取消"],showClose:true,shadeClose:false,animationType:"bounce",titleStyle:{},buttonStyle:[{},n]};l=h(l,k);if(l.buttonStyle.length==1){l.buttonStyle=[k.buttonStyle[0],n]}this.open(m,l)},layer:function(k){var l={width:500,height:400,showClose:true,shadeClose:false,animationType:"bounce",titleStyle:{},style:1,content:"",afterLoad:function(){}};l=h(l,k);l.btn=[];l.showClose=true;l.layer=true;this.open(l.content,l)},open:function(r,w){var s=document.createElement("div");var v=document.createElement("div");var u=document.createElement("div");var m=document.createElement("div");m.innerHTML=w.title||"信息";u.innerHTML=r;d(s,"mcx-dialog");d(s,"animation-"+w.animationType+"-in");d(v,"dialog-head");d(u,"dialog-content");d(m,"dialog-title");v.appendChild(m);s.appendChild(v);s.appendChild(u);if(w.width){s.style.width=w.width+"px"}if(w.height){if(!w.layer){u.style.height=w.height-41-2*18-50+"px"}else{u.style.height=w.height-41+"px";d(u,"dialog-layer-content")}}if(w.titleStyle){for(var p in w.titleStyle){v.style[p]=w.titleStyle[p]}}if(w.showClose){var o=document.createElement("i");d(o,"dialog-ico");v.appendChild(o)}if(!w.layer){var l=document.createElement("div");d(l,"dialog-foot");s.appendChild(l)}else{if(w.style==1){d(s,"dialog-layer");v.style.borderRadius="0"}u.style.overflow="auto"}w.buttons=[];for(var q=0;q<w.btn.length;q++){var n=document.createElement("a");n.href="javascript:void(0);";n.innerHTML=w.btn[q];d(n,"dialog-foot-btn");if(w.buttonStyle&&w.buttonStyle.length>0){var t=w.buttonStyle[q];for(var p in t){n.style[p]=t[p]}}l.appendChild(n);w.buttons.push(n)}c.init(s,w,true)},msg:function(p,m){var o={time:3,style:{},animationType:"zoom"};o=h(o,m);var n=document.createElement("div");d(n,"mcx-dialog-msg");d(n,"animation-"+o.animationType+"-in");n.innerHTML=p;for(var l in o.style){n.style[l]=o.style[l]}c.initHint(n,o)},tips:function(r,q,u){var l={time:3,direction:"right",animationType:"zoom",style:{}};l=h(l,u);l.target=q||"";var n={left:"right",right:"left",top:"bottom",bottom:"top"};var p=document.createElement("div");var m=document.createElement("div");var t=document.createElement("div");var s=document.createElement("div");d(p,"mcx-dialog-tips");d(p,"animation-"+l.animationType+"-in");d(m,"tips-wrapper");d(t,"tips-arrow-"+n[l.direction]);s.innerHTML=r;p.appendChild(m);m.appendChild(t);m.appendChild(s);for(var o in l.style){p.style[o]=l.style[o];if(o=="backgroundColor"){if(l.direction=="left"||l.direction=="right"){t.style.borderBottomColor=l.style[o]}else{t.style.borderRightColor=l.style[o]}}}c.initHint(p,l)},loading:function(n){var p={src:"img",hint:"",type:1,animationType:"zoom"};p=h(p,n);var q=document.createElement("div");var l=document.createElement("div");var o=document.createElement("img");var m=document.createElement("div");d(q,"mcx-dialog-loading-bg");d(l,"mcx-dialog-loading");d(l,"animation-"+p.animationType+"-in");if(p.hint){d(l,"mcx-dialog-loading-hint");m.innerHTML=p.hint}o.src=p.src+"/loading-"+p.type+".gif";l.appendChild(o);l.appendChild(m);var k=document.getElementsByTagName("body")[0];k.appendChild(q);k.appendChild(l);l.style.top=(document.documentElement.clientHeight-l.offsetHeight)/2+"px";l.style.left=(document.documentElement.clientWidth-l.offsetWidth)/2+"px";this.loadElement.push(q);this.loadElement.push(l)},closeLoading:function(){c.close(this.loadElement);this.loadElement=[]},closeLayer:function(){c.close(this.layerElement);this.layerElement=[]}};e.mcxDialog=g})(window);